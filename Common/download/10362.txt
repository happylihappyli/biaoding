using Common_Robot2;
using MvCamCtrl.NET;

namespace Test1
{
    public class S_RGB_Get_HK : C_Node
    {
        public S_Camera_HK pCamera = null;
        //public uint8_t_ARRAY pixel_arr = null;
        //public TY_IMAGE_DATA img = null;
        //public uint8_t_ARRAY color_data;//彩色原图

        public Bitmap img = null;
        public string key_rgb = "key_rgb";
        public string key_save = "";
        //public Data_RGB pLast2 = null;


        public S_RGB_Get_HK(string name, C_Space space_parent, C_Space space) :
            base(space_parent, space)
        {
            this.Name = name;
            space.vars_step.Add(Name, this);
        }

        public override Task run_sub()
        {
            run_sub_main();
            return Task.CompletedTask;
        }

        private void run_sub_main()
        {
            RGB图处理(this.img);//, img.width,img.height);
        }

        public void RGB图处理(Bitmap img)
        {

            try
            {
                if (this.key_save != "")
                    space.save_vars(pTrain, this, this.key_save, "Bitmap", img);
                if (this.key_rgb!="")
                    space.save_vars(pTrain, this, this.key_rgb, "Bitmap", img);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        }


    }
}