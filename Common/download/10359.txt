using Common_Robot2;


namespace Test1
{

    /// <summary>
    /// 拍照步骤，按模块化思路来做
    /// </summary>
    public class S_Convert_To_String : C_Node
    {

        public string key_read = "";
        public string key_save = "";
        public string type = "";


        public S_Convert_To_String(string name,C_Space space_parent,C_Space space) : base(space_parent,space)
        {
            this.Name = name;
            space.vars_step.Add(Name, this);
        }


        public override Task run_sub()
        {
            run_sub_main();
            return Task.CompletedTask;
        }

        public void run_sub_main()
        {
            var pItem = space.read_vars(pTrain, this, key_read,this.type);
            if (pItem == null) return;
            Type t = pItem.GetType();
            if (t.Name == type)
            {
                string value = pItem.ToString();
                space.save_vars(pTrain, this, this.key_save,"string",value);
            }
        }
    }
}
